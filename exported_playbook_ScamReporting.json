{
  "playbook": {
    "playbook": {
      "displayName": "ScamReporting",
      "goal": "Help users report and understand potential scams by collecting details about suspicious messages or incidents, analyzing them for scam patterns, and providing appropriate advice and reporting options in the user's preferred language.",
      "steps": [ {
        "text": "Initiate the report by asking the user to describe the suspicious message or incident in as much detail as possible."
      }, {
        "text": "Detect the user's preferred language from the `user_language` session parameter; default to 'en' if not provided."
      }, {
        "text": "Analyze the scam_description to determine the `scam_type` and `risk_level`:",
        "steps": [ {
          "text": "Examples of known scams:",
          "steps": [ {
            "text": "UPI QR code scam (e.g., 'scan to receive')"
          }, {
            "text": "KYC/account block scams (e.g., 'update your PAN/Aadhaar')"
          }, {
            "text": "Phishing scams (e.g., OTP requests or fake links)"
          }, {
            "text": "Loan scams (e.g., upfront processing fee)"
          }, {
            "text": "Job scams (e.g., fake interviews with registration fees)"
          }, {
            "text": "Government impersonation scams (e.g., fake RBI refund portals)"
          } ]
        }, {
          "text": "Legitimate examples (likely safe):",
          "steps": [ {
            "text": "Salary credit notifications, login OTPs, account alerts"
          } ]
        } ]
      }, {
        "text": "Based on classification, assign:",
        "steps": [ {
          "text": "scam_type: (e.g., 'Phishing', 'Loan Scam', 'Not a Scam')"
        }, {
          "text": "risk_level: 'High', 'Medium', or 'Low'"
        }, {
          "text": "Provide a brief explanation, and an actionable advice on what the user can do in such case."
        } ]
      }, {
        "text": "Respond in the user's selected language using a friendly and calm tone."
      }, {
        "text": "Ask the user: 'Would you like to report another suspicious message, or end the call?'"
      }, {
        "text": "If the user wants to report another, loop back and prompt for a new scam_description."
      }, {
        "text": "If the user wants to end, gracefully conclude and save the `scam_type` and `risk_level` and `session_id`."
      }, {
        "text": "CALL ${TOOL:701db48c-90a3-4f58-ab85-a52606a30f37}, and execute to log the output"
      } ],
      "tools": [ "701db48c-90a3-4f58-ab85-a52606a30f37" ],
      "inputParameterDefinitions": [ {
        "name": "user_language",
        "description": "the language in which the user asks the question",
        "typeSchema": {
          "inlineSchema": {
            "type": "STRING"
          }
        },
        "parameterType": {
          "name": "user_language",
          "openapiJsonSchema": {
            "type": "string"
          },
          "parsedSchema": {
            "inlineSchema": {
              "type": "STRING"
            }
          }
        }
      }, {
        "name": "scam_description",
        "description": "user describes the suspicious message incident etc",
        "typeSchema": {
          "inlineSchema": {
            "type": "STRING"
          }
        },
        "parameterType": {
          "name": "scam_description",
          "openapiJsonSchema": {
            "type": "string"
          },
          "parsedSchema": {
            "inlineSchema": {
              "type": "STRING"
            }
          }
        }
      } ],
      "outputParameterDefinitions": [ {
        "name": "scam_type",
        "description": "scam_type",
        "typeSchema": {
          "inlineSchema": {
            "type": "STRING"
          }
        },
        "parameterType": {
          "name": "scam_type",
          "openapiJsonSchema": {
            "type": "string"
          },
          "parsedSchema": {
            "inlineSchema": {
              "type": "STRING"
            }
          }
        }
      }, {
        "name": "risk_level",
        "description": "risk",
        "typeSchema": {
          "inlineSchema": {
            "type": "STRING"
          }
        },
        "parameterType": {
          "name": "risk_level",
          "openapiJsonSchema": {
            "type": "string"
          },
          "parsedSchema": {
            "inlineSchema": {
              "type": "STRING"
            }
          }
        }
      } ],
      "etag": "687e8805",
      "playbookId": "1b017fbb-0ef5-481b-a32a-9713d287b801",
      "tokenCount": 453,
      "ragSettings": {
      
      },
      "handlers": [ {
        "eventHandler": {
          "event": "before playbook end",
          "fulfillment": {
            "nextActionOverride": {
              "toolUse": {
                "tool": "701db48c-90a3-4f58-ab85-a52606a30f37",
                "action": "logScamReport",
                "inputActionParameters": {
                  "requestBody": {
                    "risk_level": "",
                    "scam_type": "",
                    "session_id": ""
                  }
                }
              }
            }
          },
          "condition": "$session.params.scam_type != null AND $session.params.risk_level != null"
        }
      } ],
      "playbookType": "WORKFLOW",
      "speechSettings": {
        "endpointerSensitivity": 90,
        "noSpeechTimeout": {
          "seconds": 30
        },
        "models": [ {
          "key": "hi",
          "value": "phone_call"
        } ]
      },
      "codeBlock": {
        "code": "# üßπ Text cleaning for IVR (symbol-free TTS)\r\ndef clean_text(text):\r\n    # Remove everything except letters (Latin and Devanagari), digits, and basic punctuation\r\n    text = re.sub(r'[^\\w\\s.,!?‚Çπ‚Çπ\\u0900-\\u097F]', '', text, flags=re.UNICODE)  # Allow Hindi script\r\n    text = re.sub(r'\\s+', ' ', text)\r\n    return text.strip()\r\n\r\n# üõ† Input handling\r\ndesc = (inputs.get(\"scam_description\") or \"\").strip().lower()\r\nlanguage = inputs.get(\"user_language\") or \"en\"\r\n\r\n# üõ° Default values\r\nscam_type = \"Unknown\"\r\nrisk = \"Medium\"\r\n\r\n# üó£Ô∏è Default messages\r\nscam_expl_en = \"This seems to be suspicious activity.\"\r\nscam_expl_hi = \"‡§Ø‡§π ‡§è‡§ï ‡§∏‡§Ç‡§¶‡§ø‡§ó‡•ç‡§ß ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø ‡§≤‡§ó‡§§‡•Ä ‡§π‡•à‡•§\"\r\n\r\nreal_case_en = \"Please stay alert when dealing with messages about money or accounts.\"\r\nreal_case_hi = \"‡§™‡•à‡§∏‡•á ‡§Ø‡§æ ‡§ñ‡§æ‡§§‡•ã‡§Ç ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§∏‡§Ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§∏‡•á ‡§®‡§ø‡§™‡§ü‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§∏‡§§‡§∞‡•ç‡§ï ‡§∞‡§π‡•á‡§Ç‡•§\"\r\n\r\naction_en = \"Avoid clicking any links or sharing personal information.\"\r\naction_hi = \"‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§≤‡§ø‡§Ç‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§®‡•á ‡§Ø‡§æ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§¨‡§ö‡•á‡§Ç‡•§\"\r\n\r\n# ‚úÖ Safe messages\r\nsafe_keywords = [\r\n    \"salary credit\", \"emi paid\", \"otp for login\", \"registered login\",\r\n    \"transaction alert\", \"sms from bank\", \"your account was used\",\r\n    \"statement available\", \"balance update\",\r\n    \"‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü\", \"‡§∏‡•à‡§≤‡§∞‡•Ä\", \"‡§ñ‡§æ‡§§‡§æ ‡§Ö‡§™‡§°‡•á‡§ü\", \"‡§ñ‡§æ‡§§‡§æ ‡§¨‡•à‡§≤‡•á‡§Ç‡§∏\", \"‡§¨‡•à‡§Ç‡§ï ‡§∏‡•á ‡§ì‡§ü‡•Ä‡§™‡•Ä\"\r\n]\r\n\r\n# üö® Scam categories ‚Äî now with Hindi phrases included\r\nif any(kw in desc for kw in safe_keywords):\r\n    scam_type = \"Not a Scam\"\r\n    risk = \"Low\"\r\n    scam_expl_en = \"This appears to be a genuine message from your bank or service provider.\"\r\n    scam_expl_hi = \"‡§Ø‡§π ‡§Ü‡§™‡§ï‡•á ‡§¨‡•à‡§Ç‡§ï ‡§Ø‡§æ ‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§§‡§æ ‡§ï‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡§ó‡§§‡§æ ‡§π‡•à‡•§\"\r\n    real_case_en = \"Banks often send alerts for valid activities like login or salary credit.\"\r\n    real_case_hi = \"‡§¨‡•à‡§Ç‡§ï ‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§≤‡•â‡§ó‡§ø‡§® ‡§Ø‡§æ ‡§µ‡•á‡§§‡§® ‡§ú‡•à‡§∏‡•Ä ‡§µ‡•à‡§ß ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§≠‡•á‡§ú‡§§‡•á ‡§π‡•à‡§Ç‡•§\"\r\n    action_en = \"If you're unsure, contact your bank for confirmation.\"\r\n    action_hi = \"‡§Ö‡§ó‡§∞ ‡§∏‡§Ç‡§¶‡•á‡§π ‡§π‡•ã, ‡§§‡•ã ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡•á ‡§¨‡•à‡§Ç‡§ï ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§\"\r\n\r\nelif any(kw in desc for kw in [\"qr code\", \"scan\", \"refund\", \"payment\", \"receive\", \"‡§ï‡•ç‡§Ø‡•Ç‡§Ü‡§∞ ‡§ï‡•ã‡§°\", \"‡§∏‡•ç‡§ï‡•à‡§®\", \"‡§∞‡§ø‡§´‡§Ç‡§°\"]):\r\n    scam_type = \"UPI QR Code Scam\"\r\n    risk = \"High\"\r\n    scam_expl_en = \"Scammers trick people into scanning a QR code to send money instead of receiving it.\"\r\n    scam_expl_hi = \"‡§ß‡•ã‡§ñ‡•á‡§¨‡§æ‡§ú‡§º ‡§Ü‡§™‡§ï‡•ã ‡§ï‡•ç‡§Ø‡•Ç‡§Ü‡§∞ ‡§ï‡•ã‡§° ‡§∏‡•ç‡§ï‡•à‡§® ‡§ï‡§∞‡§µ‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡§ø‡§∏‡§∏‡•á ‡§™‡•à‡§∏‡§æ ‡§ö‡§≤‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§\"\r\n    real_case_en = \"One person scanned a QR for a refund and lost 12,000 rupees instantly.\"\r\n    real_case_hi = \"‡§è‡§ï ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§®‡•á ‡§∞‡§ø‡§´‡§Ç‡§° ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ç‡§Ø‡•Ç‡§Ü‡§∞ ‡§∏‡•ç‡§ï‡•à‡§® ‡§ï‡§ø‡§Ø‡§æ ‡§î‡§∞ 12,000 ‡§∞‡•Å‡§™‡§Ø‡•á ‡§ï‡§ü ‡§ó‡§è‡•§\"\r\n    action_en = \"Never scan QR codes to receive money. Use only trusted apps.\"\r\n    action_hi = \"‡§™‡•à‡§∏‡•á ‡§™‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§≠‡•Ä ‡§≠‡•Ä ‡§ï‡•ç‡§Ø‡•Ç‡§Ü‡§∞ ‡§∏‡•ç‡§ï‡•à‡§® ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§ï‡•á‡§µ‡§≤ ‡§≠‡§∞‡•ã‡§∏‡•á‡§Æ‡§Ç‡§¶ ‡§ê‡§™‡•ç‡§∏ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§\"\r\n\r\nelif any(kw in desc for kw in [\"kyc\", \"account block\", \"pan\", \"aadhaar\", \"update\", \"‡§ï‡•á‡§µ‡§æ‡§à‡§∏‡•Ä\", \"‡§™‡•à‡§®\", \"‡§Ü‡§ß‡§æ‡§∞\", \"‡§ñ‡§æ‡§§‡§æ ‡§¨‡§Ç‡§¶\"]):\r\n    scam_type = \"KYC Scam\"\r\n    risk = \"High\"\r\n    scam_expl_en = \"Scammers send fake messages about KYC expiry to steal your details.\"\r\n    scam_expl_hi = \"‡§ß‡•ã‡§ñ‡•á‡§¨‡§æ‡§ú‡§º KYC ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§‡§ø ‡§ï‡•á ‡§´‡§∞‡•ç‡§ú‡•Ä ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≠‡•á‡§ú‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ö‡•Å‡§∞‡§æ ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§\"\r\n    real_case_en = \"Someone lost 15,000 rupees after filling a fake KYC form.\"\r\n    real_case_hi = \"‡§ï‡§ø‡§∏‡•Ä ‡§®‡•á ‡§´‡§∞‡•ç‡§ú‡•Ä KYC ‡§´‡•â‡§∞‡•ç‡§Æ ‡§≠‡§∞‡§æ ‡§î‡§∞ 15,000 ‡§∞‡•Å‡§™‡§Ø‡•á ‡§ó‡§Ç‡§µ‡§æ ‡§¶‡§ø‡§è‡•§\"\r\n    action_en = \"Your bank never asks for details via SMS. Always verify directly.\"\r\n    action_hi = \"‡§Ü‡§™‡§ï‡§æ ‡§¨‡•à‡§Ç‡§ï ‡§ï‡§≠‡•Ä ‡§≠‡•Ä SMS ‡§∏‡•á ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§æ‡§Ç‡§ó‡§§‡§æ‡•§ ‡§π‡§Æ‡•á‡§∂‡§æ ‡§∏‡•Ä‡§ß‡•á ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡•á‡§Ç‡•§\"\r\n\r\nelif any(kw in desc for kw in [\"loan\", \"interest\", \"guaranteed\", \"disbursement\", \"upfront\", \"‡§ã‡§£\", \"‡§¨‡•ç‡§Ø‡§æ‡§ú\", \"‡§è‡§°‡§µ‡§æ‡§Ç‡§∏\"]):\r\n    scam_type = \"Loan Scam\"\r\n    risk = \"Medium\"\r\n    scam_expl_en = \"Fake loan agents ask for fees or documents before giving any loan.\"\r\n    scam_expl_hi = \"‡§´‡§∞‡•ç‡§ú‡•Ä ‡§è‡§ú‡•á‡§Ç‡§ü ‡§ã‡§£ ‡§¶‡•á‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§Ø‡§æ ‡§∂‡•Å‡§≤‡•ç‡§ï ‡§Æ‡§æ‡§Ç‡§ó‡§§‡•á ‡§π‡•à‡§Ç‡•§\"\r\n    real_case_en = \"One victim paid 5,000 rupees for loan processing and got nothing.\"\r\n    real_case_hi = \"‡§è‡§ï ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§®‡•á 5,000 ‡§∞‡•Å‡§™‡§Ø‡•á ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§¶‡§ø‡§è ‡§≤‡•á‡§ï‡§ø‡§® ‡§ã‡§£ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§\"\r\n    action_en = \"Do not pay fees in advance. Verify with RBI-listed lenders.\"\r\n    action_hi = \"‡§™‡§π‡§≤‡•á ‡§∂‡•Å‡§≤‡•ç‡§ï ‡§® ‡§¶‡•á‡§Ç‡•§ ‡§π‡§Æ‡•á‡§∂‡§æ RBI ‡§∏‡•á ‡§Æ‡§æ‡§®‡•ç‡§Ø‡§§‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§\"\r\n\r\nelif any(kw in desc for kw in [\"job\", \"training\", \"registration\", \"placement\", \"‡§®‡•å‡§ï‡§∞‡•Ä\", \"‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§®\", \"‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£\"]):\r\n    scam_type = \"Job Scam\"\r\n    risk = \"Medium\"\r\n    scam_expl_en = \"Scammers offer fake jobs and ask for money upfront.\"\r\n    scam_expl_hi = \"‡§ß‡•ã‡§ñ‡•á‡§¨‡§æ‡§ú‡§º ‡§®‡§ï‡§≤‡•Ä ‡§®‡•å‡§ï‡§∞‡§ø‡§Ø‡§æ‡§Ç ‡§¶‡•á‡§ï‡§∞ ‡§™‡§π‡§≤‡•á ‡§™‡•à‡§∏‡•á ‡§Æ‡§æ‡§Ç‡§ó‡§§‡•á ‡§π‡•à‡§Ç‡•§\"\r\n    real_case_en = \"Someone paid 3,000 rupees for a job interview and got no reply.\"\r\n    real_case_hi = \"‡§è‡§ï ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§®‡•á 3,000 ‡§∞‡•Å‡§™‡§Ø‡•á ‡§¶‡§ø‡§è ‡§î‡§∞ ‡§ï‡•ã‡§à ‡§â‡§§‡•ç‡§§‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§\"\r\n    action_en = \"Don't pay for job offers. Legit companies never charge applicants.\"\r\n    action_hi = \"‡§®‡•å‡§ï‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§≠‡•Ä ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Ö‡§∏‡§≤‡•Ä ‡§ï‡§Ç‡§™‡§®‡§ø‡§Ø‡§æ‡§Å ‡§∂‡•Å‡§≤‡•ç‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§≤‡•á‡§§‡•Ä‡§Ç‡•§\"\r\n\r\nelif any(kw in desc for kw in [\"otp\", \"password\", \"click here\", \"link\", \"verify\", \"‡§ì‡§ü‡•Ä‡§™‡•Ä\", \"‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°\", \"‡§ï‡•ç‡§≤‡§ø‡§ï\", \"‡§≤‡§ø‡§Ç‡§ï\"]):\r\n    scam_type = \"Phishing\"\r\n    risk = \"High\"\r\n    scam_expl_en = \"You might have received a fake link or message to steal your login details.\"\r\n    scam_expl_hi = \"‡§Ü‡§™‡§ï‡•ã ‡§®‡§ï‡§≤‡•Ä ‡§≤‡§ø‡§Ç‡§ï ‡§Ø‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Æ‡§ø‡§≤‡§æ ‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ö‡•Å‡§∞‡§æ‡§è‡•§\"\r\n    real_case_en = \"One person entered OTP on a fake site and lost access.\"\r\n    real_case_hi = \"‡§è‡§ï ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§®‡•á ‡§®‡§ï‡§≤‡•Ä ‡§∏‡§æ‡§á‡§ü ‡§™‡§∞ OTP ‡§°‡§æ‡§≤‡§æ ‡§î‡§∞ ‡§ñ‡§æ‡§§‡§æ ‡§ñ‡•ã ‡§¶‡§ø‡§Ø‡§æ‡•§\"\r\n    action_en = \"Never click suspicious links. Type URLs manually or contact your bank.\"\r\n    action_hi = \"‡§Ö‡§®‡§ú‡§æ‡§® ‡§≤‡§ø‡§Ç‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§ñ‡•Å‡§¶ ‡§ñ‡•ã‡§≤‡•á‡§Ç ‡§Ø‡§æ ‡§¨‡•à‡§Ç‡§ï ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§\"\r\n\r\nelif any(kw in desc for kw in [\"rbi\", \"govt\", \"refund portal\", \"scheme\", \"insurance bonus\", \"‡§∏‡§∞‡§ï‡§æ‡§∞\", \"‡§Ü‡§∞‡§¨‡•Ä‡§Ü‡§à\", \"‡§Ø‡•ã‡§ú‡§®‡§æ\", \"‡§∞‡§ø‡§´‡§Ç‡§° ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤\"]):\r\n    scam_type = \"Fake Government Message\"\r\n    risk = \"High\"\r\n    scam_expl_en = \"Fraudsters pretend to be from RBI or govt and offer fake refunds or bonuses.\"\r\n    scam_expl_hi = \"‡§ß‡•ã‡§ñ‡•á‡§¨‡§æ‡§ú‡§º RBI ‡§Ø‡§æ ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§®‡§æ‡§Æ ‡§∏‡•á ‡§´‡§∞‡•ç‡§ú‡•Ä ‡§≤‡§æ‡§≠ ‡§ï‡§æ ‡§¶‡§æ‡§µ‡§æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§\"\r\n    real_case_en = \"One person lost 8,000 rupees after entering details on a fake refund site.\"\r\n    real_case_hi = \"‡§ï‡§ø‡§∏‡•Ä ‡§®‡•á ‡§®‡§ï‡§≤‡•Ä ‡§∏‡§æ‡§á‡§ü ‡§™‡§∞ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡•Ä ‡§î‡§∞ 8,000 ‡§∞‡•Å‡§™‡§Ø‡•á ‡§ó‡§Ç‡§µ‡§æ ‡§¶‡§ø‡§è‡•§\"\r\n    action_en = \"Never trust messages pretending to be from RBI or govt.\"\r\n    action_hi = \"RBI ‡§Ø‡§æ ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§®‡§æ‡§Æ ‡§∏‡•á ‡§Ü‡§è ‡§∏‡§Ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§™‡§∞ ‡§≠‡§∞‡•ã‡§∏‡§æ ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§\"\r\n\r\n# üé§ Build final IVR-friendly voice response\r\nif language == \"hi\":\r\n    full_response = f\"{scam_expl_hi} {real_case_hi} {action_hi} ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§§‡§∞‡•ç‡§ï ‡§∞‡§π‡•á‡§Ç‡•§ ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ï‡•ã‡§à ‡§î‡§∞ ‡§∏‡§Ç‡§¶‡§ø‡§ó‡•ç‡§ß ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á, ‡§Ø‡§æ ‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á?\"\r\nelse:\r\n    if scam_type == \"Not a Scam\":\r\n        full_response = f\"{scam_expl_en} {real_case_en} {action_en} Would you like to report another suspicious message, or end the call?\"\r\n    else:\r\n        full_response = f\"{scam_expl_en} {real_case_en} {action_en} Please stay cautious. Would you like to report another suspicious message, or end the call?\"\r\n\r\n# üßπ Clean for TTS\r\nfull_response = clean_text(full_response)\r\n\r\n# ‚úÖ Final output\r\nreturn {\r\n    \"response\": full_response,\r\n    \"risk_level\": risk,\r\n    \"scam_type\": scam_type\r\n}"
      },
      "speechAdaptationSettings": {
      
      }
    },
    "tools": [ {
      "id": "701db48c-90a3-4f58-ab85-a52606a30f37",
      "displayName": "Webhook",
      "description": "This tool logs the scam_type, risk_level, and session_id into a Cloud SQL database when a playbook concludes.",
      "openApiTool": {
        "textSchema": "openapi: 3.0.0\ninfo:\n  title: Finwise Scam Logger API\n  version: 1.0.0\n  description: 'Logs scam_type, risk_level, and session_id to Cloud SQL'\nservers:\n  - url: 'https://scamlog-244103233396.asia-south1.run.app'\npaths:\n  /:\n    post:\n      summary: Log scam report details\n      operationId: logScamReport\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required:\n                - scam_type\n                - risk_level\n                - session_id\n              properties:\n                scam_type:\n                  type: string\n                  description: The type of scam reported\n                risk_level:\n                  type: string\n                  description: The risk level of the reported scam\n                session_id:\n                  type: string\n                  description: The Dialogflow session ID\n      responses:\n        '200':\n          description: Log successful\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  success:\n                    type: boolean\n                  message:\n                    type: string\n        '500':\n          description: Internal Server Error\n",
        "authentication": {
          "serviceAgentAuthConfig": {
            "serviceAgentAuth": "ID_TOKEN"
          }
        },
        "ignoreUnknownFields": true
      },
      "actions": [ "6e9dbf20-9c8e-4e5b-b8ca-20a2c8dc5695" ],
      "etag": "687e8512"
    } ],
    "examples": [ {
      "key": "8358c8f6-2d4b-455f-9050-4935dcdcc28b",
      "value": {
        "actions": [ {
          "agentUtterance": {
            "text": "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•Å‡§ù‡•á ‡§¨‡§§‡§æ‡§è‡§Ç ‡§ï‡§ø ‡§µ‡§π ‡§∏‡§Ç‡§¶‡§ø‡§ó‡•ç‡§ß ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Ø‡§æ ‡§ò‡§ü‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§•‡•Ä ‡§§‡§æ‡§ï‡§ø ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡•Ç‡§Ç. ‡§ú‡§ø‡§§‡§®‡§æ ‡§π‡•ã ‡§∏‡§ï‡•á ‡§â‡§§‡§®‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§∏‡•á ‡§¨‡§§‡§æ‡§è‡§Ç.\n"
          }
        }, {
          "userUtterance": {
            "text": "‡§Æ‡•Å‡§ù‡•á ‡§¨‡•à‡§Ç‡§ï ‡§∏‡•á ‡§ï‡•â‡§≤ ‡§Ü‡§Ø‡§æ ‡§î‡§∞ ‡§Æ‡•á‡§∞‡§æ CVV ‡§®‡§Ç‡§¨‡§∞ ‡§Æ‡§æ‡§Ç‡§ó‡§æ ‡§ó‡§Ø‡§æ"
          }
        }, {
          "agentUtterance": {
            "text": "‡§Ü‡§™‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¨‡§§‡§æ‡§è ‡§ó‡§è ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞, ‡§Ø‡§π ‡§è‡§ï ‡§´‡§º‡§ø‡§∂‡§ø‡§Ç‡§ó ‡§ò‡•ã‡§ü‡§æ‡§≤‡§æ ‡§≤‡§ó‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§ï‡§æ ‡§∏‡•ç‡§§‡§∞ ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•à. ‡§¨‡•à‡§Ç‡§ï ‡§ï‡§≠‡•Ä ‡§≠‡•Ä CVV ‡§®‡§Ç‡§¨‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§æ‡§Ç‡§ó‡§§‡•á ‡§π‡•à‡§Ç. ‡§Ö‡§™‡§®‡§æ CVV ‡§®‡§Ç‡§¨‡§∞ ‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•ã ‡§≠‡•Ä ‡§® ‡§¶‡•á‡§Ç.\n\n‡§Æ‡•á‡§∞‡§æ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§π‡•à ‡§ï‡§ø ‡§Ü‡§™ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§Ö‡§™‡§®‡•á ‡§¨‡•à‡§Ç‡§ï ‡§ï‡•ã ‡§á‡§∏ ‡§ò‡§ü‡§®‡§æ ‡§ï‡•Ä ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§¶‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•á ‡§ï‡§æ‡§∞‡•ç‡§° ‡§ï‡•ã ‡§¨‡•ç‡§≤‡•â‡§ï ‡§ï‡§∞‡§µ‡§æ ‡§¶‡•á‡§Ç.\n\n‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ï‡•ã‡§à ‡§Ö‡§®‡•ç‡§Ø ‡§∏‡§Ç‡§¶‡§ø‡§ó‡•ç‡§ß ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á, ‡§Ø‡§æ ‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á?\n"
          }
        }, {
          "userUtterance": {
            "text": "‡§Æ‡•Å‡§ù‡•á ‡§®‡•å‡§ï‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•â‡§≤ ‡§Ü‡§Ø‡§æ ‡§≤‡•á‡§ï‡§ø‡§® ‡§µ‡•á ‡§Æ‡•Å‡§ù‡•á ‡§®‡•å‡§ï‡§∞‡•Ä ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•à‡§∏‡•á ‡§Æ‡§æ‡§Ç‡§ó ‡§∞‡§π‡•á ‡§π‡•à‡§Ç"
          }
        }, {
          "agentUtterance": {
            "text": "‡§Ü‡§™‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¨‡§§‡§æ‡§è ‡§ó‡§è ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞, ‡§Ø‡§π ‡§è‡§ï ‡§®‡•å‡§ï‡§∞‡•Ä ‡§ò‡•ã‡§ü‡§æ‡§≤‡§æ ‡§≤‡§ó‡§§‡§æ ‡§π‡•à ‡§î‡§∞ ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§ï‡§æ ‡§∏‡•ç‡§§‡§∞ ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•à. ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§ï‡§Ç‡§™‡§®‡§ø‡§Ø‡§æ‡§Ç ‡§®‡•å‡§ï‡§∞‡•Ä ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§≠‡•Ä ‡§≠‡•Ä ‡§™‡•à‡§∏‡•á ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§æ‡§Ç‡§ó‡§§‡•Ä ‡§π‡•à‡§Ç.\n\n‡§Æ‡•á‡§∞‡§æ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§π‡•à ‡§ï‡§ø ‡§Ü‡§™ ‡§™‡•Å‡§≤‡§ø‡§∏ ‡§ï‡•ã ‡§á‡§∏ ‡§ò‡§ü‡§®‡§æ ‡§ï‡•Ä ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§¶‡•á‡§Ç.\n\n‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ï‡•ã‡§à ‡§Ö‡§®‡•ç‡§Ø ‡§∏‡§Ç‡§¶‡§ø‡§ó‡•ç‡§ß ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á, ‡§Ø‡§æ ‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á?\n"
          }
        } ],
        "playbookInput": {
          "precedingConversationSummary": "start of converstation where user_language is \"hi\"",
          "actionParameters": {
          
          }
        },
        "playbookOutput": {
          "executionSummary": "end conversation",
          "actionParameters": {
          
          }
        },
        "id": "8358c8f6-2d4b-455f-9050-4935dcdcc28b",
        "etag": "687b78c6",
        "displayName": "hindiflow",
        "retrievalStrategy": "STATIC",
        "tokenCount": 435,
        "conversationState": "OUTPUT_STATE_OK",
        "languageCode": "hi"
      }
    } ]
  }
}
